/*!
 * jsFB - Facebook JS API - jQuery Plugin
 * https://github.com/alemohamad/jsFB/
 * Copyright (c) 2013-2014 @alemohamad
 * Version: 1.1.0 (03-JUN-2014)
 */
(function(e){var t=null;var n=null;var r=null;e.jsFB=function(i){var s={fbAppId:"app_id_number",fbAppAccessToken:"app_access_token",fbScope:"user_about_me, email",domain:"domain.com",locale:"en_US",likeEnabled:false,fanPageID:"fanpage_id_number",likegateURL:"likegate_url",appType:"app_type",callback:undefined,debug:false};var o=e.extend({},s,i);initFB=function(){if(e("#fb-root").length){if(o.fbAppId=="app_id_number"){alert("You have to define an App ID in order to use this plugin!");return false}if(o.fbAppAccessToken=="app_access_token"){alert("You have to define an App Access Token in order to use this plugin!");return false}if(o.likeEnabled==true&&o.fanPageID=="fanpage_id_number"){alert("You have to define a Fan Page ID in order to use this plugin!");return false}if(o.likeEnabled==true&&o.likegateURL=="likegate_url"){alert("You have to define a Likegate URL in order to use this plugin!");return false}if(o.likeEnabled==true&&o.appType=="app_type"){alert("You have to define an App Type in order to use this plugin!");return false}e.ajaxSetup({cache:true});e.getScript("//connect.facebook.net/"+o.locale+"/sdk.js",function(){FB.init({appId:o.fbAppId,status:true,cookie:true,xfbml:true,version:"v2.0",frictionlessRequests:true,channel:true,channelUrl:"//"+o.domain+"/channel.html"});FB.getLoginStatus(updateStatusCallback)});updateStatusCallback=function(e){if(e.authResponse!=null){t=e.authResponse.userID}if(t==null){jsFB.fbConsole("not logged in")}else{n=e.authResponse.accessToken?e.authResponse.accessToken:null;r=e.authResponse.signedRequest?e.authResponse.signedRequest:null;jsFB.fbConsole("logged in");jsFB.getUserInfo("me",o.callback);if(o.likeEnabled==true){jsFB.isFan(o.fanPageID)}}};window.__proto__.jsFB={authUser:function(e){FB.login(function(i){if(i.authResponse==null){jsFB.fbConsole("The user didn't accept the application permissions.");return false}n=i.authResponse.accessToken?i.authResponse.accessToken:null;r=i.authResponse.signedRequest?i.authResponse.signedRequest:null;t=i.authResponse.userID?i.authResponse.userID:null;jsFB.getUserInfo("me",e);if(o.likeEnabled==true){jsFB.isFan(o.fanPageID)}},{scope:o.fbScope})},logoutUser:function(e){FB.logout(function(t){jsFB.fbConsole("user logged out");jsFB.returnMethod(e,t)})},getUserInfo:function(e,t){FB.api("/"+e,function(e){jsFB.returnMethod(t,e)})},getUserAlbums:function(e,t){FB.api("/"+e+"/albums",function(e){jsFB.returnMethod(t,e)})},getUserAlbumInfo:function(e,t){FB.api("/"+e,function(e){jsFB.returnMethod(t,e)})},getUserAlbumPhotos:function(e,t){FB.api("/"+e+"/photos",function(e){jsFB.returnMethod(t,e)})},isFan:function(e,t){FB.api({method:"pages.isFan",page_id:e},function(e){if(e){jsFB.fbConsole("the user likes the fan page");jsFB.returnMethod(t,e)}else{jsFB.fbConsole("the user doesn't like the fan page");jsFB.returnMethod(t,e);switch(o.appType){case"web":case"tab":window.location.href=o.likegateURL;break;case"app":window.parent.location.href=o.likegateURL;break}}})},sendInvite:function(t,n){if(e.isPlainObject(t)==false){var t={}}t["method"]="apprequests";FB.ui(t,function(e){jsFB.returnMethod(n,e)})},getRequests:function(e){FB.api("/me/apprequests","get",function(t){jsFB.returnMethod(e,t)})},removeRequest:function(e,n){FB.api("/"+e+"_"+t,"delete",function(e){jsFB.returnMethod(n,e)})},sendNotification:function(e,t,n,r){FB.api("/"+e+"/notifications","post",{template:t,href:n,access_token:o.fbAppAccessToken},function(e){jsFB.returnMethod(r,e)})},postToFB:function(t,n){if(e.isPlainObject(t)==false){var t={}}t["method"]="feed";FB.ui(t,function(e){jsFB.returnMethod(n,e)})},directPostToFB:function(e,t){FB.api("/me/feed","post",e,function(e){jsFB.returnMethod(t,e)})},sendPrivateMessage:function(t,n){if(e.isPlainObject(t)==false){var t={}}t["method"]="send";FB.ui(t,function(e){jsFB.returnMethod(n,e)})},uploadPicture:function(t,r){if(e.isPlainObject(t)==false){var t={}}t["access_token"]=n;FB.api("/me/photos","post",t,function(e){jsFB.returnMethod(r,e)})},uploadPictureInPage:function(e,t,n,r,i){FB.api("/"+n+"/photos","post",{message:e,url:t,access_token:r},function(e){jsFB.returnMethod(i,e)})},getPageAccessToken:function(e,t){var n=false;FB.api("/me/accounts",function(r){for(item in r.data){if(e==r.data[item].id){n=true;jsFB.returnMethod(t,r);jsFB.fbConsole(r.data[item].access_token)}}if(n==false){jsFB.fbConsole("the user is not admin of this page")}})},getMakeProfilePictureURL:function(e){return"https://www.facebook.com/photo.php?fbid="+e+"&type=1&makeprofile=1&makeuserprofile=1"},getMakeCoverPictureURL:function(e){return"https://www.facebook.com/profile.php?preview_cover="+e},getInvitableFriends:function(e){FB.api("/me/invitable_friends",function(t){jsFB.returnMethod(e,t)})},getFriends:function(e){FB.api("/me/friends",function(t){jsFB.returnMethod(e,t)})},getFriendsOrdered:function(e){FB.api("/me/friends",function(t){jsFB.returnMethod(e,t.data.sort(jsFB.sortByName))})},sortByName:function(e,t){var n=e.name.toLowerCase();var r=t.name.toLowerCase();return n<r?-1:n>r?1:0},addNewFriend:function(e,t){FB.ui({method:"friends.add",id:e},function(e){jsFB.returnMethod(t,e)})},getScores:function(e){FB.api("/"+o.fbAppId+"/scores",function(t){jsFB.returnMethod(e,t)})},setScore:function(e,t){FB.api("/me/scores","post",{score:e,access_token:n},function(e){jsFB.returnMethod(t,e)})},setAutoGrow:function(e){FB.Canvas.setAutoGrow(e)},setSize:function(e,t){FB.Canvas.setSize({width:e,height:t})},returnMethod:function(e,t){if(e!=undefined){window[e](t)}jsFB.fbConsole(t)},fbConsole:function(e){if(o.debug){console.log(e)}}}}else{e("body").prepend("<div id='fb-root'></div>");initFB()}};jQuery(document).ready(function(){initFB()})}})(jQuery)