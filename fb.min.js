/*!
 * jsFB - Facebook JS API - jQuery Plugin
 * https://github.com/alemohamad/jsFB/
 * Copyright (c) 2013-2014 @alemohamad
 * Version: 1.0.8 (04-JAN-2014)
 */
!function(e){var n=null,t=null,o=null;e.jsFB=function(s){var i={fbAppId:"app_id_number",fbAppAccessToken:"app_access_token",fbScope:"user_about_me, email",domain:"domain.com",locale:"en_US",likeEnabled:!1,fanPageID:"fanpage_id_number",likegateURL:"likegate_url",appType:"app_type",callback:void 0,debug:!1},a=e.extend({},i,s);initFB=function(){if(e("#fb-root").length){if("app_id_number"==a.fbAppId)return alert("You have to define an App ID in order to use this plugin!"),!1;if("app_access_token"==a.fbAppAccessToken)return alert("You have to define an App Access Token in order to use this plugin!"),!1;if(1==a.likeEnabled&&"fanpage_id_number"==a.fanPageID)return alert("You have to define a Fan Page ID in order to use this plugin!"),!1;if(1==a.likeEnabled&&"likegate_url"==a.likegateURL)return alert("You have to define a Likegate URL in order to use this plugin!"),!1;if(1==a.likeEnabled&&"app_type"==a.appType)return alert("You have to define an App Type in order to use this plugin!"),!1;e.ajaxSetup({cache:!0}),e.getScript("//connect.facebook.net/"+a.locale+"/all.js",function(){FB.init({appId:a.fbAppId,status:!0,cookie:!0,xfbml:!0,frictionlessRequests:!0,channel:!0,channelUrl:"//"+a.domain+"/channel.html"}),FB.getLoginStatus(updateStatusCallback)}),updateStatusCallback=function(e){null!=e.authResponse&&(n=e.authResponse.userID),null==n?jsFB.fbConsole("not logged in"):(t=e.authResponse.accessToken?e.authResponse.accessToken:null,o=e.authResponse.signedRequest?e.authResponse.signedRequest:null,jsFB.fbConsole("logged in"),jsFB.getUserInfo("me",a.callback),1==a.likeEnabled&&jsFB.isFan(a.fanPageID))},window.__proto__.jsFB={authUser:function(e){FB.login(function(s){return null==s.authResponse?(jsFB.fbConsole("The user didn't accept the application permissions."),!1):(t=s.authResponse.accessToken?s.authResponse.accessToken:null,o=s.authResponse.signedRequest?s.authResponse.signedRequest:null,n=s.authResponse.userID?s.authResponse.userID:null,jsFB.getUserInfo("me",e),1==a.likeEnabled&&jsFB.isFan(a.fanPageID),void 0)},{scope:a.fbScope})},logoutUser:function(e){FB.logout(function(n){jsFB.fbConsole("user logged out"),jsFB.returnMethod(e,n)})},getUserInfo:function(e,n){FB.api("/"+e,function(e){jsFB.returnMethod(n,e)})},isFan:function(e,n){FB.api({method:"pages.isFan",page_id:e},function(e){if(e)jsFB.fbConsole("the user likes the fan page"),jsFB.returnMethod(n,e);else switch(jsFB.fbConsole("the user doesn't like the fan page"),jsFB.returnMethod(n,e),a.appType){case"web":case"tab":window.location.href=a.likegateURL;break;case"app":window.parent.location.href=a.likegateURL}})},sendInvite:function(e,n){e.method="apprequests",FB.ui(e,function(e){jsFB.returnMethod(n,e)})},getRequests:function(e){FB.api("/me/apprequests","get",function(n){jsFB.returnMethod(e,n)})},removeRequest:function(e,t){FB.api("/"+e+"_"+n,"delete",function(e){jsFB.returnMethod(t,e)})},sendNotification:function(e,n,t,o){FB.api("/"+e+"/notifications","post",{template:n,href:t,access_token:a.fbAppAccessToken},function(e){jsFB.returnMethod(o,e)})},postToFB:function(e,n){e.method="feed",FB.ui(e,function(e){jsFB.returnMethod(n,e)})},directPostToFB:function(e,n){FB.api("/me/feed","post",e,function(e){jsFB.returnMethod(n,e)})},sendPrivateMessage:function(e,n){e.method="send",FB.ui(e,function(e){jsFB.returnMethod(n,e)})},uploadPicture:function(e,n){e.access_token=t,FB.api("/me/photos","post",e,function(e){jsFB.returnMethod(n,e)})},uploadPictureInPage:function(e,n,t,o,s){FB.api("/"+t+"/photos","post",{message:e,url:n,access_token:o},function(e){jsFB.returnMethod(s,e)})},getPageAccessToken:function(e,n){var t=!1;FB.api("/me/accounts",function(o){for(item in o.data)e==o.data[item].id&&(t=!0,jsFB.returnMethod(n,o),jsFB.fbConsole(o.data[item].access_token));0==t&&jsFB.fbConsole("the user is not admin of this page")})},getMakeProfilePictureURL:function(e){return"https://www.facebook.com/photo.php?fbid="+e+"&type=1&makeprofile=1&makeuserprofile=1"},getMakeCoverPictureURL:function(e){return"https://www.facebook.com/profile.php?preview_cover="+e},getFriends:function(e){FB.api("/me/friends",function(n){jsFB.returnMethod(e,n)})},getFriendsOrdered:function(e){FB.api("/me/friends",function(n){jsFB.returnMethod(e,n.data.sort(jsFB.sortByName))})},sortByName:function(e,n){var t=e.name.toLowerCase(),o=n.name.toLowerCase();return o>t?-1:t>o?1:0},addNewFriend:function(e,n){FB.ui({method:"friends.add",id:e},function(e){jsFB.returnMethod(n,e)})},getScores:function(e){FB.api("/"+a.fbAppId+"/scores",function(n){jsFB.returnMethod(e,n)})},setScore:function(e,n){FB.api("/me/scores","post",{score:e,access_token:t},function(e){jsFB.returnMethod(n,e)})},setAutoGrow:function(e){FB.Canvas.setAutoGrow(e)},setSize:function(e,n){FB.Canvas.setSize({width:e,height:n})},returnMethod:function(e,n){void 0!=e&&window[e](n),jsFB.fbConsole(n)},fbConsole:function(e){a.debug&&console.log(e)}}}else e("body").prepend("<div id='fb-root'></div>"),initFB()},jQuery(document).ready(function(){initFB()})}}(jQuery);